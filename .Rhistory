sort(x)
Sys.time() - a
sort
UseMethod("sort", x)
insertion_sort <- function(x){
n <- length(x)
for(j in 2:n){
#print(x)
key = x[j]
i = j - 1
while(i>0 && x[i] > key){
x[i+1] = x[i]
i = i - 1
}
x[i+1] = key
}
#print(x)
return(x)
}
merge_ <- function(A, p, q, r){
n1 <- q - p + 1
n2 <- r - q
L <- vector(length = n1 + 1)
R <- vector(length = n2 + 1)
for(i in 1:n1){
L[i] <- A[p+i-1]
}
for(j in 1:n2){
R[j] <- A[q+j]
}
L[n1 + 1] <- Inf
R[n2 + 1] <- Inf
i = 1
j = 1
for(k in p:r){
if(L[i] <= R[j]){
A[k] <- L[i]
i <- i + 1
}
else {
A[k] <- R[j]
j <- j + 1
}
}
#print(A)
return(A)
}
merge_sort <- function(A, p, r){
if(p < r){
q <- (p+r) %/% 2
A <- merge_sort(A, p, q)
A <- merge_sort(A, q+1, r)
merge_(A, p, q, r)
} else {
A
}
}
(1+4) %/% 2
(1+2) %/% 2
split(data.frame(x= c(1,2,34,54,435,46,234,234,1,12), y = c(1,1,1,1,2,2,2,2,2,3,3)), y)
split(data.frame(x= c(1,2,34,54,435,46,234,234,1,12), y = c(1,1,1,1,2,2,2,2,2,3)), y)
aa <- data.frame(x= c(1,2,34,54,435,46,234,234,1,12), y = c(1,1,1,1,2,2,2,2,2,3))
split(aa, y)
split(aa, aa$y)
library(stargazer)
y <- rnorm(100)
x <- rnorm(100)
y2 <- rnorm(100)
x2 <- rnorm(100)
lista <- list()
for(i in 1:10){
lista[[1]] <- data.frame(y = rnorm(100), x = rnorm(100))
}
for(i in 1:10){
lista[[i]] <- data.frame(y = rnorm(100), x = rnorm(100))
}
library(dplyr)
library(lmtest)
library(sandwich)
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = x)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = x)
})
lm(y ~ x, data = a)
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
do.call(what = 'rbind')
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(coef)
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
coef(reg[[1]])
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(x$Estimate, x$Std. Error)
})
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(x$Estimate, x$`Std. Error`)
})
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg[[1]]
reg[[1]]$Std. Error
reg[[1]]$`Std. Error`
reg[[1]]$`Std. Error''
reg[[1]]$'Std. Error'
reg[[1]][,1]
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(x[,1], x[,2])
})
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(Estimate = x[,1], Std. Error = x[,2])
})
reg <- lista %>%
lapply(function(a){
lm(y ~ x, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(Estimate = x[,1], 'Std. Error' = x[,2])
})
reg[[1]]
lista[[i]] <- data.frame(y = rnorm(100), x1 = rnorm(100), x2 = rnorm(100))
for(i in 1:10){
lista[[i]] <- data.frame(y = rnorm(100), x1 = rnorm(100), x2 = rnorm(100))
}
lista <- list()
for(i in 1:10){
lista[[i]] <- data.frame(y = rnorm(100), x1 = rnorm(100), x2 = rnorm(100))
}
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
t() %>%
data.frame(rownames(.), .)
})
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(rownames(.), .)
})
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(rownames(.), .)
}) %>%
do.call(what = 'rbind')
View(reg)
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind')
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind')
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise(mean())
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean()))
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
})
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
jorge <- reg[[1]] %>% as.data.frame()
jorge <- reg[[1]] %>% coef()
jorge <- reg[[1]]
jorge <- reg[1]
jorge <- reg[1] %>% as.data.frame()
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))})
reg[[1]]
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2], 't value' =  x[,3], 'Pr(>|t|)'= x[,4]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2], 't value' =  x[,3], 'Pr\(>|t|\)'= x[,4]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2], 't value' =  x[,3], 'P.valor'= x[,4]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
View(reg)
reg <- lista %>%
lapply(function(a){
lm(y ~ x1 + x2, data = a)
}) %>%
lapply(function(x){coeftest(x, vcov=NeweyWest(x))}) %>%
lapply(function(x){
a <- data.frame(Estimate = x[,1], 'Std. Error' = x[,2], 't value' =  x[,3], 'p.value'= x[,4]) %>%
data.frame(variavel=rownames(.), .)
rownames(a) <- c()
return(a)
}) %>%
do.call(what = 'rbind') %>%
group_by(variavel) %>%
summarise_all(funs(mean))
View(reg)
library(readxl)
setwd("C:\\Users\\tadeu\\Desktop\\FGV\\code\\anthony")
stacks <- list.files(path = "stacks",pattern = ".rds")
completed_stacks <- lapply(stacks, function(x)readRDS(sprintf("stacks/%s",x))) %>%
do.call(what = "rbind.data.frame") %>%
select(index) %>%
unlist() %>%
as.character() %>%
as.numeric()
library(dplyr)
completed_stacks <- lapply(stacks, function(x)readRDS(sprintf("stacks/%s",x))) %>%
do.call(what = "rbind.data.frame") %>%
select(index) %>%
unlist() %>%
as.character() %>%
as.numeric()
files <- list.files(path = "res",pattern = ".rds")
completed_files <- substring(files, 6, 12) %>% as.numeric()
sum(completed_files %in% completed_stacks)
completed_stacks <- lapply(stacks, function(x)readRDS(sprintf("stacks/%s",x))) %>%
do.call(what = "rbind.data.frame")
View(completed_stacks)
tail(completed_files)
stacks <- list.files(path = "stacks",pattern = ".rds")
completed_stacks <- lapply(stacks, function(x)readRDS(sprintf("stacks/%s",x))) %>%
do.call(what = "rbind.data.frame")
View(completed_stacks)
df <- completed_stacks[!duplicated(completed_stacks)]
df <- completed_stacks[!duplicated(completed_stacks),]
View(df)
View(completed_stacks)
View(df)
interval <- 3000000:7000000
interval <- 3000000:7000000
interval <- interval[!(interval %in% df$index)]
length(interval)
interval_1 <- interval[1:length(interval)/24]
interval_1 <- interval[1:length(interval)/24]
length(interval)/24
interval_1 <- interval[1:floor(length(interval)/24)]
for(i in 1:24){
(interval[(i*floor(length(interval)/24)+1):((i+1)floor(length(interval)/24))])
}
for(i in 1:24){
(interval[(i*floor(length(interval)/24)+1):((i+1)*floor(length(interval)/24))])
}
for(i in 1:24){
(interval[(i*floor(length(interval)/24)+1):((i+1)*floor(length(interval)/24))])
}
for(i in 1:24){
print(interval[(i*floor(length(interval)/24)+1):((i+1)*floor(length(interval)/24))])
}
for(i in 1:24){
print(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))])
}
for(i in 1:23){
print(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))] %>% head())
}
View(df)
for(i in 0:23){
(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))] %>% head()) %>%
#write.csv(sprintf("stacks/interval%s.csv"), (i+1))
print()
}
for(i in 0:23){
(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))] %>% head()) %>%
write.csv(sprintf("stacks/interval%s.csv"), (i+1))
}
for(i in 0:23){
(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))] %>% head()) %>%
write.csv(sprintf("stacks/interval%s.csv", (i+1)))
}
for(i in 0:23){
(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))]) %>%
write.csv(sprintf("stacks/interval%s.csv", (i+1)), row.names = F)
}
for(i in 0:23){
(interval[(i*ceiling(length(interval)/24)+1):((i+1)*ceiling(length(interval)/24))] %>% head()) %>%
print()
}
path <- "python\\results"
files <- list.files(path = "python\\result",pattern = ".csv")
files <- list.files(path = "python\\result/",pattern = ".csv")
files <- list.files(path = "python/results",pattern = ".csv")
all_files <- lapply(files, function(x)read.csv(sprintf("python/results/%s",x))) %>%
do.call(what = "rbind.data.frame")
View(all_files)
all_files[126494,]
all_files[126494,]
all_files <- lapply(files, function(x)read.csv(sprintf("python/results/%s",x), stringsAsFactors = F)) %>%
do.call(what = "rbind.data.frame")
all_files <- lapply(files, function(x)read.csv(sprintf("python/results/batch1/%s",x), stringsAsFactors = F)) %>%
do.call(what = "rbind.data.frame")
completed_stacks <- list.files(path = "stacks",pattern = ".rds") %>%
lapply(function(x)readRDS(sprintf("stacks/%s",x))) %>%
do.call(what = "rbind.data.frame")
View(completed_stacks)
View(all_files)
saveRDS(all_files, "python/results/stack1.rds")
